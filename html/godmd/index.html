  <div id="main">
    <div class="header">
        <h1>goDMD - Config</h1>
    </div>

    <div class="content">
      <div class="pure-g">
        <div class="pure-u-1 pure-u-md-1-2">
          <div class="card">
            <h1>
              Clock <div id="clock-spinner" class="spinner spinner-small"></div>
            </h1>
            <div>
            <form action="#" id="clock-form" class="pure-form">
              <div class="pure-form-stacked">
                <label>Set time</label>
                <input type="text" name="time" />
                <div class="popup">Input time in format HH:MM:SS.</div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<script type="text/javascript">

function configClock(e) {
  e.preventDefault();
  var url = "godmd/rest?1=1";
  var i, inputs = document.querySelectorAll("#" + e.target.id + " input,select");
  for (i = 0; i < inputs.length; i++) {
    if (inputs[i].type == "checkbox") {
      if (inputs[i].name.slice(-6) == "enable")
        continue;
      var val = (inputs[i].checked) ? 1 : 0;
      url += "&" + inputs[i].name + "=" + val;
    }
    else
      url += "&" + inputs[i].name + "=" + inputs[i].value;
  };

  hideWarning();
  var n = e.target.id.replace("-form", "");
  var cb = $("#" + n + "-button");
  addClass(cb, "pure-button-disabled");
  ajaxSpin("POST", url, function (resp) {
    showNotification(n + " updated");
    removeClass(cb, "pure-button-disabled");
  }, function (s, st) {
    showWarning("Error: " + st);
    removeClass(cb, "pure-button-disabled");
    //window.setTimeout(fetchServices, 100);
  });

}

onLoad(function() {
  fetchServices();
  bnd($("#clock-form"), "submit", configClock);

  $("#clock-spinner").setAttribute("hidden", "");
});
</script>
</body></html>
